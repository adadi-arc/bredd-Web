import { format } from 'date-fns';
export const MS_IN_DAY = 24 * 60 * 60 * 1000;
export const MS_IN_HOUR = 60 * 60 * 1000;
export function getPeriodEvents(events, start, end) {
    return events.filter((event) => {
        if (event.startDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.endDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.startDate <= start && event.endDate >= end) {
            return true;
        }
        return false;
    });
}
export function getMonthDayEvents(events, start, end) {
    return events
        .filter((event) => {
        if (event.startDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.endDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.startDate <= start && event.endDate >= end) {
            return true;
        }
        return false;
    })
        .map((event) => {
        return Object.assign(Object.assign({}, event), { startStr: format(event.startDate, 'YYYY-MM-DDTHH:mm:ss'), endStr: format(event.endDate, 'YYYY-MM-DDTHH:mm:ss'), eventStart: event.startDate >= start, eventEnd: event.endDate <= end, longEvent: event.endDate.getTime() - event.startDate.getTime() >= MS_IN_DAY });
    });
}
export function getListViewEvents(events, start, end) {
    return events
        .filter((event) => {
        if (event.startDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.endDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.startDate <= start && event.endDate >= end) {
            return true;
        }
        if (event.startDate >= start && event.startDate <= end) {
            return true;
        }
        return false;
    })
        .map((event) => {
        return Object.assign(Object.assign({}, event), { startStr: format(event.startDate, 'YYYY-MM-DDTHH:mm:ss'), endStr: format(event.endDate, 'YYYY-MM-DDTHH:mm:ss'), start: {
                date: format(event.startDate, 'DD/MM/YYYY'),
                time: format(event.startDate, 'h:mm:ss A')
            }, end: {
                date: format(event.endDate, 'DD/MM/YYYY'),
                time: format(event.endDate, 'h:mm:ss A')
            } });
    });
}
export function getWeekDayEvents(events, start, end, dayStart, dayEnd) {
    return events
        .filter((event) => {
        if (event.startDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.endDate >= start && event.endDate <= end) {
            return true;
        }
        if (event.startDate <= start && event.endDate >= end) {
            return true;
        }
        return false;
    })
        .map((event) => {
        return Object.assign(Object.assign({}, event), { startStr: format(event.startDate, 'YYYY-MM-DDTHH:mm:ss'), endStr: format(event.endDate, 'YYYY-MM-DDTHH:mm:ss'), allDay: event.startDate <= dayStart && event.endDate.getTime() >= dayEnd.getTime() - 999 });
    });
}
export function getWeekHourEvents(events, start, end, dayStart, dayEnd) {
    return getWeekDayEvents(events, start, end, dayStart, dayEnd)
        .filter(event => !event.allDay)
        .map(event => {
        return Object.assign(Object.assign({}, event), { eventStart: event.startDate >= start, eventEnd: event.endDate <= end, longEvent: event.endDate.getTime() - event.startDate.getTime() >= MS_IN_HOUR });
    });
}
export function getWeekAllDayEvents(events, start, end, dayStart, dayEnd) {
    return getWeekDayEvents(events, start, end, dayStart, dayEnd)
        .filter(event => event.allDay)
        .map(event => {
        return Object.assign(Object.assign({}, event), { eventStart: event.startDate >= dayStart, eventEnd: event.endDate <= dayEnd, longEvent: event.endDate.getTime() - event.startDate.getTime() >= MS_IN_DAY });
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZXZlbnQtdXRpbHMuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9tZGItY2FsZW5kYXIvIiwic291cmNlcyI6WyJsaWIvdWlsdHMvZXZlbnQtdXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLFVBQVUsQ0FBQztBQUVsQyxNQUFNLENBQUMsTUFBTSxTQUFTLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDO0FBQzdDLE1BQU0sQ0FBQyxNQUFNLFVBQVUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQztBQUV6QyxNQUFNLFVBQVUsZUFBZSxDQUFDLE1BQVcsRUFBRSxLQUFXLEVBQUUsR0FBUztJQUNqRSxPQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUUsQ0FBQyxLQUFVLEVBQUUsRUFBRTtRQUVuQyxJQUFJLEtBQUssQ0FBQyxTQUFTLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxPQUFPLElBQUksR0FBRyxFQUFFO1lBQ3BELE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFFRCxJQUFJLEtBQUssQ0FBQyxPQUFPLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxPQUFPLElBQUksR0FBRyxFQUFFO1lBQ2xELE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFFRCxJQUFJLEtBQUssQ0FBQyxTQUFTLElBQUksS0FBSyxJQUFJLEtBQUssQ0FBQyxPQUFPLElBQUksR0FBRyxFQUFFO1lBQ3BELE9BQU8sSUFBSSxDQUFDO1NBQ2I7UUFFRCxPQUFPLEtBQUssQ0FBQztJQUVmLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVELE1BQU0sVUFBVSxpQkFBaUIsQ0FBQyxNQUFXLEVBQUUsS0FBVyxFQUFFLEdBQVM7SUFDbkUsT0FBTyxNQUFNO1NBQ1osTUFBTSxDQUFFLENBQUMsS0FBVSxFQUFFLEVBQUU7UUFDdEIsSUFBSSxLQUFLLENBQUMsU0FBUyxJQUFJLEtBQUssSUFBSSxLQUFLLENBQUMs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UUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLElBQUksR0FBRyxFQUM5QixTQUFTLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLFVBQVUsSUFDMUU7SUFDSixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUM7QUFFRCxNQUFNLFVBQVUsbUJBQW1CLENBQUMsTUFBVyxFQUFFLEtBQVcsRUFBRSxHQUFTLEVBQUUsUUFBYyxFQUFFLE1BQVk7SUFDbkcsT0FBTyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsTUFBTSxDQUFDO1NBQzFELE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7U0FDN0IsR0FBRyxDQUFFLEtBQUssQ0FBQyxFQUFFO1FBQ1osdUNBQ0ssS0FBSyxLQUNSLFVBQVUsRUFBRSxLQUFLLENBQUMsU0FBUyxJQUFJLFFBQVEsRUFDdkMsUUFBUSxFQUFFLEtBQUssQ0FBQyxPQUFPLElBQUksTUFBTSxFQUNqQyxTQUFTLEVBQUUsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLE9BQU8sRUFBRSxJQUFJLFNBQVMsSUFDM0U7SUFDSixDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmb3JtYXQgfSBmcm9tICdkYXRlLWZucyc7XG5cbmV4cG9ydCBjb25zdCBNU19JTl9EQVkgPSAyNCAqIDYwICogNjAgKiAxMDAwO1xuZXhwb3J0IGNvbnN0IE1TX0lOX0hPVVIgPSA2MCAqIDYwICogMTAwMDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBlcmlvZEV2ZW50cyhldmVudHM6IGFueSwgc3RhcnQ6IERhdGUsIGVuZDogRGF0ZSkge1xuICByZXR1cm4gZXZlbnRzLmZpbHRlciggKGV2ZW50OiBhbnkpID0+IHtcblxuICAgIGlmIChldmVudC5zdGFydERhdGUgPj0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA8PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChldmVudC5lbmREYXRlID49IHN0YXJ0ICYmIGV2ZW50LmVuZERhdGUgPD0gZW5kKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuc3RhcnREYXRlIDw9IHN0YXJ0ICYmIGV2ZW50LmVuZERhdGUgPj0gZW5kKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG5cbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNb250aERheUV2ZW50cyhldmVudHM6IGFueSwgc3RhcnQ6IERhdGUsIGVuZDogRGF0ZSkge1xuICByZXR1cm4gZXZlbnRzXG4gIC5maWx0ZXIoIChldmVudDogYW55KSA9PiB7XG4gICAgaWYgKGV2ZW50LnN0YXJ0RGF0ZSA+PSBzdGFydCAmJiBldmVudC5lbmREYXRlIDw9IGVuZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmVuZERhdGUgPj0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA8PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdGFydERhdGUgPD0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA+PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSlcbiAgLm1hcCggKGV2ZW50KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmV2ZW50LFxuICAgICAgc3RhcnRTdHI6IGZvcm1hdChldmVudC5zdGFydERhdGUsICdZWVlZLU1NLUREVEhIOm1tOnNzJyksXG4gICAgICBlbmRTdHI6IGZvcm1hdChldmVudC5lbmREYXRlLCAnWVlZWS1NTS1ERFRISDptbTpzcycpLFxuICAgICAgZXZlbnRTdGFydDogZXZlbnQuc3RhcnREYXRlID49IHN0YXJ0LFxuICAgICAgZXZlbnRFbmQ6IGV2ZW50LmVuZERhdGUgPD0gZW5kLFxuICAgICAgbG9uZ0V2ZW50OiBldmVudC5lbmREYXRlLmdldFRpbWUoKSAtIGV2ZW50LnN0YXJ0RGF0ZS5nZXRUaW1lKCkgPj0gTVNfSU5fREFZXG4gICAgfTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRMaXN0Vmlld0V2ZW50cyhldmVudHM6IGFueSwgc3RhcnQ6IERhdGUsIGVuZDogRGF0ZSkge1xuICByZXR1cm4gZXZlbnRzXG4gIC5maWx0ZXIoIChldmVudDogYW55KSA9PiB7XG4gICAgaWYgKGV2ZW50LnN0YXJ0RGF0ZSA+PSBzdGFydCAmJiBldmVudC5lbmREYXRlIDw9IGVuZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmVuZERhdGUgPj0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA8PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdGFydERhdGUgPD0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA+PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdGFydERhdGUgPj0gc3RhcnQgJiYgZXZlbnQuc3RhcnREYXRlIDw9IGVuZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9KVxuICAubWFwKCAoZXZlbnQpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZXZlbnQsXG4gICAgICBzdGFydFN0cjogZm9ybWF0KGV2ZW50LnN0YXJ0RGF0ZSwgJ1lZWVktTU0tRERUSEg6bW06c3MnKSxcbiAgICAgIGVuZFN0cjogZm9ybWF0KGV2ZW50LmVuZERhdGUsICdZWVlZLU1NLUREVEhIOm1tOnNzJyksXG4gICAgICBzdGFydDoge1xuICAgICAgICBkYXRlOiBmb3JtYXQoZXZlbnQuc3RhcnREYXRlLCAnREQvTU0vWVlZWScpLFxuICAgICAgICB0aW1lOiBmb3JtYXQoZXZlbnQuc3RhcnREYXRlLCAnaDptbTpzcyBBJylcbiAgICAgIH0sXG4gICAgICBlbmQ6IHtcbiAgICAgICAgZGF0ZTogZm9ybWF0KGV2ZW50LmVuZERhdGUsICdERC9NTS9ZWVlZJyksXG4gICAgICAgIHRpbWU6IGZvcm1hdChldmVudC5lbmREYXRlLCAnaDptbTpzcyBBJylcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla0RheUV2ZW50cyhldmVudHM6IGFueSwgc3RhcnQ6IERhdGUsIGVuZDogRGF0ZSwgZGF5U3RhcnQ6IERhdGUsIGRheUVuZDogRGF0ZSkge1xuICByZXR1cm4gZXZlbnRzXG4gIC5maWx0ZXIoIChldmVudDogYW55KSA9PiB7XG4gICAgaWYgKGV2ZW50LnN0YXJ0RGF0ZSA+PSBzdGFydCAmJiBldmVudC5lbmREYXRlIDw9IGVuZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmVuZERhdGUgPj0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA8PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChldmVudC5zdGFydERhdGUgPD0gc3RhcnQgJiYgZXZlbnQuZW5kRGF0ZSA+PSBlbmQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSlcbiAgLm1hcCggKGV2ZW50KSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLmV2ZW50LFxuICAgICAgc3RhcnRTdHI6IGZvcm1hdChldmVudC5zdGFydERhdGUsICdZWVlZLU1NLUREVEhIOm1tOnNzJyksXG4gICAgICBlbmRTdHI6IGZvcm1hdChldmVudC5lbmREYXRlLCAnWVlZWS1NTS1ERFRISDptbTpzcycpLFxuICAgICAgYWxsRGF5OiBldmVudC5zdGFydERhdGUgPD0gZGF5U3RhcnQgJiYgZXZlbnQuZW5kRGF0ZS5nZXRUaW1lKCkgPj0gZGF5RW5kLmdldFRpbWUoKSAtIDk5OSxcbiAgICB9O1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdlZWtIb3VyRXZlbnRzKGV2ZW50czogYW55LCBzdGFydDogRGF0ZSwgZW5kOiBEYXRlLCBkYXlTdGFydDogRGF0ZSwgZGF5RW5kOiBEYXRlKSB7XG4gIHJldHVybiBnZXRXZWVrRGF5RXZlbnRzKGV2ZW50cywgc3RhcnQsIGVuZCwgZGF5U3RhcnQsIGRheUVuZClcbiAgICAuZmlsdGVyKGV2ZW50ID0+ICFldmVudC5hbGxEYXkpXG4gICAgLm1hcCggZXZlbnQgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXZlbnQsXG4gICAgICBldmVudFN0YXJ0OiBldmVudC5zdGFydERhdGUgPj0gc3RhcnQsXG4gICAgICBldmVudEVuZDogZXZlbnQuZW5kRGF0ZSA8PSBlbmQsXG4gICAgICBsb25nRXZlbnQ6IGV2ZW50LmVuZERhdGUuZ2V0VGltZSgpIC0gZXZlbnQuc3RhcnREYXRlLmdldFRpbWUoKSA+PSBNU19JTl9IT1VSXG4gICAgICB9O1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0V2Vla0FsbERheUV2ZW50cyhldmVudHM6IGFueSwgc3RhcnQ6IERhdGUsIGVuZDogRGF0ZSwgZGF5U3RhcnQ6IERhdGUsIGRheUVuZDogRGF0ZSkge1xuICByZXR1cm4gZ2V0V2Vla0RheUV2ZW50cyhldmVudHMsIHN0YXJ0LCBlbmQsIGRheVN0YXJ0LCBkYXlFbmQpXG4gICAgLmZpbHRlcihldmVudCA9PiBldmVudC5hbGxEYXkpXG4gICAgLm1hcCggZXZlbnQgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgLi4uZXZlbnQsXG4gICAgICAgIGV2ZW50U3RhcnQ6IGV2ZW50LnN0YXJ0RGF0ZSA+PSBkYXlTdGFydCxcbiAgICAgICAgZXZlbnRFbmQ6IGV2ZW50LmVuZERhdGUgPD0gZGF5RW5kLFxuICAgICAgICBsb25nRXZlbnQ6IGV2ZW50LmVuZERhdGUuZ2V0VGltZSgpIC0gZXZlbnQuc3RhcnREYXRlLmdldFRpbWUoKSA+PSBNU19JTl9EQVlcbiAgICAgIH07XG4gICAgfSk7XG59XG4iXX0=